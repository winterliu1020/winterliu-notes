如何设计一个分布式存储系统？

并行性能、容错、复制 一致性

为了提高性能，所以将数据分到不同的机器上，sharding（分片）

机器一多，可能某台机器就出故障，不是一出故障就人工介入去修复错误，而是要有一个**容错系统**，能够容忍某些机器出故障，并且能够自动修复这些故障机器。

要容错，最简单的就是用复制，每个数据有2-3个数据副本。

但是。。

副本多了的话，一不小心这些副本之间就会不一致。。。

所以就有不一致问题。

为了解决不一致问题，就需要不同机器之间通过网络做额外的交互，这就又会降低性能。



一个好的一致性系统在外部看来就像只有一个server，并且同一时刻只能接受一个客户端的请求并处理。

强一致性系统

---

GFS怎么做的呢？

也就是怎么处理这种多台机器带来的数据不一致问题呢。。

GFS想做的是一个Big, Fast, Global的文件系统

它只有一个Master，master负责管理文件信息、chunk的信息；而且这两块信息是完全隔离开进行管理。

master其实就是知道任何一个文件对应的所有的chunk的ID，因为一个chunk是64M，如果一个1GB文件，就直接向master询问这个文件对应的所有的chunkID.

---

那GFS的一致性怎么搞呢，还有如何处理故障？